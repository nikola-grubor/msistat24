---
title: "Mere centralne tendencije"
date: last-modified
author: "Dr Nikola Grubor"
# institute: "Institut za Medicinsku Statistiku i Informatiku"
logo: "slike/logo.png"
lang: sr-Latn

format:
  revealjs:
    slide-number: true
    show-slide-number: speaker
    theme: [default, custom.scss]

revealjs-plugins:
  - revealjs-text-resizer
---

```{r}
library(glue)
library(here)
library(tidyverse)
library(tinytable)
library(gtsummary)
library(gganimate)
```

## Šta je model?

Namena statističkog modela je da najjednostavnije predstavi [stukturu]{.yellow} podataka.

## Model je opis procesa

It can also be useful to think of a statistical model as a theory of how the observed data were generated; our goal then becomes to find the model that most efficiently and accurately summarizes the way in which the data were actually generated.

## Modeli nisu tačni

As the statistician George Box famously said: “All models are wrong but some are useful.”

## Osnovna sturuktura modela

$$ \text{podaci} = \text{model} + \text{greška} $$ {#eq-def-model}
$$  \widehat{\text{podaci}}_i = \text{model}_i $$ {#eq-def-model-approx}
$$ \text{greška}_i = \text{podaci}_i - \widehat{\text{podaci}} $$ {#eq-def-error}

::: notes
This expresses the idea that the data can be broken into two portions: one portion that is described by a statistical model, which expresses the values that we expect the data to take given our knowledge, and another portion that we refer to as the error that reflects the difference between the model’s predictions and the observed data.
:::

## Šta je najbolji opis podataka

The question then becomes: how do we estimate the best values of the parameter(s) in the model?

## Mod (1)

One very simple estimator that we might imagine is the mode, which is simply the most common value in the dataset.

Mod (tipična vrednost) je najčešća vrednost.

## Mod (2)

$$ 1,2,2,4,4,4,7,8,9,11,11$$
$$ mod = 4 $$

## Unimodalna i bimodalna raspodela

```{r}
N <- 1000
unimod <- tibble( x = rnorm(n = N, mean = -8, sd = 1) )
bimod <- tibble( x = rnorm(n = N, mean = 1, sd = 1))
bimod <- bimod %>% add_row(x = rnorm(n = N, mean = 5, sd = 1))

ggplot(data = unimod, aes( x = x)) +
  geom_histogram(fill = "tomato", color = "#F7F8F9") +
  geom_histogram(data = bimod, aes( x = x), fill = "#F4BA02", color = "#F7F8F9") +
  theme_void() +
  theme(
   panel.grid.minor = element_blank(), 
   panel.grid.major = element_blank(),
   plot.background = element_rect(fill = "#F7F8F9", colour = NA),
   panel.background = element_rect(fill = "#F7F8F9", colour = NA),
 )
  
```

## Aritmetička sredina

$$ \bar x = \frac{\sum_{i=1}^{n}x_i}{n} = \frac{x_1 + x_2 + ... + x_n}{n} $$ 

Placeholder.

::: {.callout-note}
Ako koristimo aritmetičku sredinu kao opis podataka prosečna greska će biti nula, međutim svaka individualna procena će i dalje imati neku grešku!
:::

## Aritmetička sredina za grupisane podatke

## Aritmetička sredina aritmetičkih sredina

## Prednosti i mane

## Šta je "dobar" model?

- Opisuje podatke verno (ima najmanju moguću grešku)
- Generalizuje se na druge podatke

Ove dve stavke mogu biti u konfliktu.

## Primer generalizacije

## Da li model može biti previše "dobar"

Model uči specifičnosti uzorka (šum)

## Ekstremne vrednosti snažno utiču na artimetičku sredinu 

Fig. primer.

## Robustna medijana

- Manje osetljiva na ekstremne vrednosti (outlier)
- 

## Računanje medijane (1)

$$ 8,6,3,14,12,7,6,4,9 $$ {#eq-median-unorded}
$$ 3,4,6,6,7,8,9,12,14 $$ {#eq-median-ordered}

Formula za medijanu:

$$ me_p = \frac{n+1}{2} = \frac{10}{2} = 5 \; (\text{pozicija})$$

::: {.notes}
Whereas the mean minimizes the sum of squared errors, the median minimizes a slighty different quantity: The sum of the absolute value of errors. Less sensitive to outliers – squaring is going to exacerbate the effect of large errors compared to taking the absolute value.
:::

## Računanje medijane (2)

Ako imamo [neparanu]{.yellow} seriju podataka:

$$1,4,8 $$
Za [parnu]{.yellow} seriju podataka uzima se srednja vrednost između dve centralne vrednosti:

$$ 1,4,8, 10 \\ me = \frac{4+8}{2} = 6$$

## Zašto uvek ne koristimo medijanu?

::: {.callout-note}
Zašto bismo onda ikad koristili aritmetičku sredinu? Aritmetička sredina varira manje od uzorka do uzroka od ostalih ocena (predstavnika) podataka. Na nama je da odlučimo da li je to vredno veće osetljivosti na ekstremne vrednosti.
:::

## Iskošene distribucije

![](slike/skew.png)

## Prednost i mane mera centralne tendencije

Tabela pros and cons

# Mere varijabiliteta

## Definicija mera varijabiliteta {.center}

::: r-fit-text
Mere varijabiliteta opisuju [variranje]{.yellow}

vrednosti skupa podataka oko srednje vrednosti.
:::

## Podela mera varijabiliteta

:::: columns

::: {.column}
**Apsolutne**:

- Interval (raspon) varijacije
- Kvantil (percentil, decil, kvartil)
- Srednje apsolutno odstupanje
- Varijansa
- Standardna devijacija
:::

::: {.column}
**Relativne**:

- Koeficijent varijacije
- Standardizovane (normalizovane) vrednosti
:::

::::

## Inverval varijacije

Koliko variraju vrednosti (npr. visine) od najmanje do najveće?

$$ I = x_{max} - x_{min} = 190cm - 165cm = 25 cm $$

## Kvantili

Dele podatke u jednak broj grupa.

:::: {.r-stack}

```{r}
quantile <- tibble( x = 1:20 , y = 1)
quantile %>% 
  ggplot(aes( x = x , y = y)) +
  geom_point(size = 8 , color = "#F4BA02") +
  theme_void() +
  theme(
   panel.grid.minor = element_blank(), 
   panel.grid.major = element_blank(),
   plot.background = element_rect(fill = "#F7F8F9", colour = NA),
   panel.background = element_rect(fill = "#F7F8F9", colour = NA),
 )
```

::: {.fragment}
```{r}
quantile <- tibble( x = 1:20 , y = 1)
quantile %>% 
  ggplot(aes( x = x , y = y)) +
  geom_point(size = 8 , color = "#F4BA02") +
  geom_vline(xintercept = 10, linewidth = 2, linetype = 2) +
  annotate("text", label = "paste(bold(medijana), \", 50. percentil\")", x = 15, y = 1.5, parse = TRUE, size = 7) +
  theme_void() +
  theme(
   panel.grid.minor = element_blank(), 
   panel.grid.major = element_blank(),
   plot.background = element_rect(fill = "#F7F8F9", colour = NA),
   panel.background = element_rect(fill = "#F7F8F9", colour = NA),
 ) +
  ylim(0, 2)
```
:::

::: {.fragment}
```{r}
quantile <- tibble( x = 1:20 , y = 1)
quantile %>% 
  ggplot(aes( x = x , y = y)) +
  geom_point(size = 8 , color = "#F4BA02") +
  annotate("segment", x = 1.5:19.5, y = 0.8, yend = 1.2, size = 1.5, linetype = 2) +
  labs(title = "Percentili") +
  theme_void() +
  theme(
   panel.grid.minor = element_blank(), 
   panel.grid.major = element_blank(),
   plot.background = element_rect(fill = "#F7F8F9", colour = NA),
   panel.background = element_rect(fill = "#F7F8F9", colour = NA),
   plot.title = element_text(hjust = 0.5)
 ) +
  ylim(0, 2)
```
:::

::::

## Tablica očekivanog rasta

![](slike/growth.jpg)
## Grafikon kutije (Box-and-Whisker Plot)

## Definicija Varijanse

$$ var = \frac{\sum(x-\bar x)^2}{n - 1} \; \text{mmHg}^2 $$

## Poenta varijanse

## Plot showing varience

## Definicija standardne devijacije

$$ var = sd^\color{#F4BA02}2 = \frac{\sum(x-\bar x)^2}{n - 1} \; \text{mmHg}^\color{#F4BA02}2$$
$$ sd = \sqrt{(\frac{\sum(x-\bar x)^2}{n - 1}) \; \text{mmHg}^\color{#F4BA02}2} $$

Definicija

PLot showing sd

## Koeficijent varijacije

Je korisna mera kada se porede varijacije između dva uzorka.

$$ CV = \frac{sd}{\bar x} \times \color{#F4BA02} {100\%} $$
$\le 30\%$ homogeni podaci.

$\gt 30\%$ heterogeni podaci.

::: {.callout-important}
Koeficijent varijacije se izražava u procentima!
:::

::: {.notes}
The coefficient of variation should be computed only for data measured on scales that have a meaningful zero (ratio scale) and hence allow relative comparison of two measurements (i.e., division of one measurement by the other). The coefficient of variation may not have any meaning for data on an interval scale.
:::

## Z-vrednost

Koliko je *standardnih devijacija* podatak udaljen od artmetičke sredine?

$$ z = \frac{x_i - \bar x}{sd} $$

## Zadaci

